<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:600&display=swap" rel="stylesheet">
    <title>Crypto Croc</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./assets/css/style.css" type="text/css" />
    <link rel="shortcut icon" href="./images/cryptocrocFinal.png">


</head>

<body>
    <img class="center" src="./images/cryptocrocFinal.png" alt="logo">
    <form>
        <select class="relative">
            <option value="bitcoin">Bitcoin</option>
            <option value="litecoin">Litecoin</option>
            <option value="ripple">Ripple</option>
            <option value="bitcoin cash">Bitcoin cash</option>
            <option value="dogecoin">Dogecoin</option>
          </select>
    <input type="button" value="Submit" class="btn">
</form>
    <div class="history"></div>
    <div class="pricesGraph"></div>
    <div class="timerRefresh"></div>
    <div class="container">
    <div class="card">

            <script type="text/javascript">
                // The below code fills in the first row of the table
                
                var queryURL = "/api/prices";
            
                $.ajax({
                  url: queryURL,
                  method: "GET"
                }).then(function(response) {
                  // Create a new table row element
                  var tRow = $("<tr>");

                      var arrayAverage = Object.entries(response[0])
                      var stringAverage = JSON.stringify(arrayAverage[3])
                     

                      var arrayGemini = Object.entries(response[1])
                      var stringGemini = JSON.stringify(arrayGemini[3])
                      

                      var arrayBinance = Object.entries(response[2])
                      var stringBinance = JSON.stringify(arrayBinance[3])
                     

                      var arrayCoinbase = Object.entries(response[3])
                      var stringCoinbase = JSON.stringify(arrayCoinbase[3])
                    
                      var arrayKraken = Object.entries(response[4])
                      var stringKraken = JSON.stringify(arrayKraken[3])
                      
                      

                    // var tHead = $("<th>")
                    console.log()
                  // Methods run on jQuery selectors return the selector they we run on
                //   // This is why we can create and save a reference to a td in the same statement we update its text
                  
                    $("#averageLast").html(stringAverage)
                    $("#geminiLast").html(stringGemini)
                    $("#binanceLast").html(stringBinance)
                    $("#coinbaseLast").html(stringCoinbase)
                    $("#krakenLast").html(stringKraken)
                  var gemini = $("<td>").text(JSON.stringify(response[1]));
                  var binance = $("<td>").text(JSON.stringify(response[2]));
                  var coinbase = $("<td>").text(JSON.stringify(response[3]));
                  var kraken = $("<td>").text(JSON.stringify(response[4]));
                //   var yearTd = $("<td>").text(response.Year);
                //   var actorsTd = $("<td>").text(response.Actors);
                    
                  // Append the newly created table data to the table row
                //   tRow.append(average, gemini, binance, coinbase, kraken);
                //   tHead.append(tRow)
                  // Append the table row to the table body
                  $("tbody").append(tRow);
                });

            </script>           
            
        </select>
        <input type="button" value="Submit" class="btn">
    </form>
           

        <div class="card-body">
            
            <h5>BTC Prices</h5>
            <div id="cryptoChart">
                <table class="table">
                    <thead>
                        <tr>
                            <th class="price-text" scope="col">Exchange</th>
                            <th class="price-text" scope="col">Current Price</th>
                            
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th class="price-text" scope="row">Average</th>
                            <td class="price-text" id="averageLast"></td>
                           
                        </tr>
                        <tr>
                            <th class="price-text" scope="row">Gemini</th>
                            <td class="price-text" id="geminiLast"></td>
                            
                        </tr>
                        <tr>
                            <th class="price-text" scope="row">Binance</th>
                            <td class="price-text" id="binanceLast"></td>
                        
                        </tr>
                        <tr>
                            <th class="price-text" scope="row">Coinbase</th>
                            <td class="price-text" id="coinbaseLast"></td>
                         
                        </tr>
                        <tr>
                            <th class="price-text" scope="row">Kraken</th>
                            <td class="price-text" id="krakenLast"></td>
                            
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        </div>
    </div>
       
    
 


            

    <script src="./assets/javascript/ajax.js"></script>
</body>

</html>